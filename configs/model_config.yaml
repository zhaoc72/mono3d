device: "cuda"
dtype: "float16"

dinov3:
  repo_or_dir: "/media/pc/D/zhaochen/mono3d/dinov3"
  model_name: "dinov3_vith16plus"
  use_torch_hub: true
  torchhub_source: "local"
  checkpoint_path: "/media/pc/D/zhaochen/mono3d/dinov3/checkpoints/dinov3_vith16plus.pth"
  
  output_layers: [8, 12]
  layer_weights: [0.4, 0.6]
  fusion_method: "weighted_sum"
  
  enable_pca: false
  enable_objectness: true

sam2:
  backend: "official"
  checkpoint_path: "/media/pc/D/zhaochen/mono3d/sam2/checkpoints/sam2.1_hiera_large.pt"
  model_config: "sam2.1/sam2.1_hiera_l"
  model_id: null
  revision: null
  load_in_8bit: false
  max_batch_size: 32
  mask_selection_strategy: "best_balanced"

pipeline:
  area_threshold: 100
  kernel_size: 7
  dilation_radius: 5
  
  output_mask_format: "png"
  save_visualization: true
  visualization_alpha: 0.5
  
  enable_nms: true
  iou_threshold: 0.5
  objectness_weight: 0.3
  confidence_weight: 0.4
  area_weight: 0.3
  
  use_superpixels: false
  use_graph_clustering: false
  use_density_clustering: false
  
  crf:
    enable: true
    max_iterations: 10
    pos_w: 3.0
    pos_xy_std: 3.0
    bi_w: 10.0
    bi_xy_std: 50.0
    bi_rgb_std: 5.0
  
  cluster:
    # ===== 自适应聚类配置 =====
    clustering_method: "adaptive"  # fixed, adaptive, hdbscan, meanshift
    
    # Fixed方法参数（仅当clustering_method="fixed"时使用）
    num_clusters: 6
    
    # Adaptive方法参数
    min_clusters: 3       # 最小聚类数
    max_clusters: 15      # 最大聚类数
    cluster_selection_method: "silhouette"  # elbow, silhouette
    
    # 通用参数
    max_iterations: 30
    random_state: 0
    min_region_area: 200
    max_regions: 20
    min_instance_area: 200
    
    use_objectness_filter: false
    objectness_threshold: 0.3
    objectness_weight: 0.5
    
    use_connected_components: true
    min_component_area: 150
    
  prompt:
    include_boxes: true
    include_points: true
    point_strategy: "density"
    max_points_per_region: 5
    density_noise_handling: "nearest"
    grid_points_per_side: 3

reconstruction:
  output_directory: "outputs/recon_inputs"
  save_metadata: true
  metadata_keys: []
  mask_extension: ".npy"