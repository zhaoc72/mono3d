# ===================================
# Mono3D Zero-Shot Segmentation Config
# ===================================

dinov3:
  repo_path: "/media/pc/D/zhaochen/mono3d/dinov3"
  model_name: "dinov3_vitl16"
  checkpoint_path: "/media/pc/D/zhaochen/mono3d/dinov3/checkpoints/dinov3_vitl16_lvd1689m.pth"
  image_size: 448
  output_layers: [4, 8, 12]
  layer_weights: [0.2, 0.3, 0.5]
  fusion_method: "weighted_sum"
  enable_pca: true
  pca_dim: 32
  enable_objectness: true
  objectness_smoothing_kernel: 3
  objectness_contrast_gamma: 0.7
  append_positional_features: true
  positional_feature_scale: 0.25
  dtype: "float32"
  device: "cuda"

sam2:
  backend: "official"
  checkpoint_path: "/media/pc/D/zhaochen/mono3d/sam2/checkpoints/sam2.1_hiera_large.pt"
  model_config: "sam2.1/sam2.1_hiera_l"
  max_batch_size: 16
  mask_selection_strategy: "best_balanced"
  multimask_output: false

detection_adapter:
  checkpoint_path: ""
  feature_dim: 1024
  num_classes: 91
  score_threshold: 0.25

segmentation_adapter:
  checkpoint_path: ""
  feature_dim: 1024
  num_classes: 150

fusion:
  objectness_threshold: 0.45
  segmentation_threshold: 0.35
  detection_score_threshold: 0.25
  min_instance_area: 60
  dilation_kernel: 3
  nms_iou_threshold: 0.6

prompts:
  include_points: true
  include_boxes: true
  include_masks: true
  max_points_per_region: 3
  grid_points_per_side: 0
  min_score: 0.15
  max_prompts: 80
  max_prompts_per_class: 20
  nms_iou_threshold: 0.5

instance_grouping:
  method: "connected_components"
  min_area: 60

postprocess:
  enable: true
  closing_kernel: 5
  opening_kernel: 3
  min_instance_area: 60

